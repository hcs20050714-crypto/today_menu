<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¤ëŠ˜ ë­ ë¨¹ì§€? ğŸ´</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        .animate-spin-slow {
            animation: spin 0.1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: scale(1.05); }
            to { transform: scale(0.95); }
        }
        
        .result-appear {
            animation: appear 0.5s ease-out;
        }
        
        @keyframes appear {
            from {
                opacity: 0;
                transform: scale(0.8) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: background 0.6s ease;
        }

        .dark-mode {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%) !important;
        }

        .dark-mode .bg-white {
            background: #2d2d44 !important;
            color: #e0e0e0 !important;
        }

        .dark-mode .text-gray-800 {
            color: #e0e0e0 !important;
        }

        .dark-mode .text-gray-700 {
            color: #b0b0b0 !important;
        }

        .dark-mode .text-gray-600 {
            color: #a0a0a0 !important;
        }

        .dark-mode .text-gray-500 {
            color: #909090 !important;
        }

        .dark-mode .border-gray-200 {
            border-color: #404040 !important;
        }

        .dark-mode .bg-blue-50 {
            background: #1e3a5f !important;
        }

        .dark-mode .border-blue-200 {
            border-color: #2d5a8f !important;
        }

        .dark-mode .bg-gradient-to-r.from-yellow-100 {
            background: linear-gradient(to right, #4a4a2e, #5a3a4a) !important;
        }

        .dark-mode .bg-gradient-to-r.from-blue-100 {
            background: linear-gradient(to right, #2a2a4e, #3a2a5a) !important;
        }

        .dark-mode .bg-gray-200 {
            background: #3a3a4a !important;
        }

        body {
            transition: all 0.6s ease;
        }

        .button-hover {
            transition: all 0.3s ease;
        }

        .button-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body class="gradient-bg min-h-screen flex items-center justify-center p-4">
    <div class="max-w-md w-full">
        <!-- Main Card -->
        <div class="bg-white rounded-3xl shadow-2xl p-8 space-y-6">
            <!-- Header -->
            <div class="text-center">
                <h1 class="text-4xl font-black text-gray-800 mb-2">ì˜¤ëŠ˜ ë­ ë¨¹ì§€? ğŸ´</h1>
                <p class="text-gray-500 text-sm">ê³ ë¯¼ ë! ë©”ë‰´ ì¶”ì²œë°›ê¸°</p>
            </div>

            <!-- Location Section -->
            <div class="space-y-4">
                <div class="bg-blue-50 border-2 border-blue-200 rounded-xl p-4">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-bold text-gray-700">ğŸ“ í˜„ì¬ ìœ„ì¹˜</p>
                            <p id="locationText" class="text-xs text-gray-500 mt-1">ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘...</p>
                        </div>
                        <button 
                            onclick="getLocation()" 
                            class="bg-blue-500 text-white px-3 py-2 rounded-lg text-xl font-bold hover:bg-blue-600 transition-colors">
                            ğŸ”„
                        </button>
                    </div>
                </div>

                <!-- Price Range Section -->
                <div>
                    <label id="priceLabel" class="block text-sm font-bold text-gray-700 mb-3">ğŸ’° ì˜¤ëŠ˜ ì–¼ë§ˆ ì“¸ê¹Œ?</label>
                    <div class="grid grid-cols-3 gap-2">
                        <button 
                            onclick="selectPrice('low')" 
                            id="priceLow"
                            class="price-btn py-3 rounded-xl border-2 border-gray-200 font-bold text-2xl transition-all hover:border-purple-400">
                            ğŸ’µ
                        </button>
                        <button 
                            onclick="selectPrice('medium')" 
                            id="priceMedium"
                            class="price-btn py-3 rounded-xl border-2 border-gray-200 font-bold text-2xl transition-all hover:border-purple-400">
                            ğŸ’µğŸ’µ
                        </button>
                        <button 
                            onclick="selectPrice('high')" 
                            id="priceHigh"
                            class="price-btn py-3 rounded-xl border-2 border-gray-200 font-bold text-2xl transition-all hover:border-purple-400">
                            ğŸ’µğŸ’µğŸ’µ
                        </button>
                    </div>
                </div>

                <!-- Button Group -->
                <div class="grid grid-cols-2 gap-4">
                    <button 
                        onclick="selectMenu('lunch')"
                        class="button-hover bg-gradient-to-r from-orange-400 to-pink-500 text-white font-bold py-4 rounded-xl shadow-lg">
                        ğŸ± ì ì‹¬ ë©”ë‰´
                    </button>
                    <button 
                        onclick="selectMenu('dinner')"
                        class="button-hover bg-gradient-to-r from-purple-500 to-indigo-600 text-white font-bold py-4 rounded-xl shadow-lg">
                        ğŸ» íšŒì‹ ë©”ë‰´
                    </button>
                </div>
            </div>

            <!-- Result Section -->
            <div id="resultSection" class="hidden space-y-4">
                <div class="bg-gradient-to-r from-yellow-100 to-pink-100 rounded-2xl p-6 text-center">
                    <p class="text-sm font-bold text-gray-600 mb-2">ì˜¤ëŠ˜ì˜ ì¶”ì²œ ë©”ë‰´</p>
                    <!-- Menu Emoji Icon -->
                    <div class="text-8xl my-4" id="menuEmoji">ğŸ´</div>
                    <p id="resultText" class="text-4xl font-black text-gray-800 mb-3"></p>
                    <!-- Menu Comment -->
                    <p id="menuComment" class="text-sm text-gray-600 italic px-4"></p>
                </div>
                
                <button 
                    id="mapButton"
                    onclick="openMap()"
                    class="button-hover w-full bg-gradient-to-r from-green-400 to-blue-500 text-white font-bold py-4 rounded-xl shadow-lg">
                    ğŸ“ ë‚´ ì£¼ë³€ ì´ ë©”ë‰´ ì‹ë‹¹ ë³´ê¸°
                </button>

                <button 
                    onclick="reset()"
                    class="w-full bg-gray-200 text-gray-700 font-bold py-3 rounded-xl hover:bg-gray-300 transition-colors">
                    ë‹¤ì‹œ ì„ íƒí•˜ê¸°
                </button>
            </div>

            <!-- Animation Display -->
            <div id="animationDisplay" class="hidden">
                <div class="bg-gradient-to-r from-blue-100 to-purple-100 rounded-2xl p-8 text-center">
                    <p id="animationText" class="text-3xl font-black text-gray-800 animate-spin-slow"></p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <p class="text-center text-white text-sm mt-6 opacity-75">
            Made with â¤ï¸ for food lovers
        </p>
    </div>

    <script>
        // ë©”ë‰´ ë°ì´í„° (ê°€ê²©ëŒ€ í¬í•¨: low=1ë§Œì› ì´í•˜, medium=1-3ë§Œì›, high=3ë§Œì› ì´ìƒ)
        const lunchMenus = [
            { name: 'íŒŒìŠ¤íƒ€', price: 'medium', emoji: 'ğŸ', searchQuery: 'íŒŒìŠ¤íƒ€ ë§›ì§‘', comment: 'í¬í¬ì— ê°ì•„ ë¨¹ëŠ” ìˆœê°„, ì´íƒˆë¦¬ì•„ë¡œ ë– ë‚˜ë³¼ê¹Œìš”?' },
            { name: 'ì¤‘êµ­ì§‘', price: 'low', emoji: 'ğŸ¥Ÿ', searchQuery: 'ì¤‘êµ­ì§‘', comment: 'ì§œì¥? ì§¬ë½•? ê³ ë¯¼ì€ ë°°ë‹¬ì˜ ì‹œì‘ì´ì£ !' },
            { name: 'ë¸ŒëŸ°ì¹˜', price: 'medium', emoji: 'ğŸ¥', searchQuery: 'ë¸ŒëŸ°ì¹˜ ì¹´í˜', comment: 'ëŠ¦ì  ìê³  ì¼ì–´ë‚˜ë„ ê´œì°®ì€ ìœ ì¼í•œ ì‹ì‚¬!' },
            { name: 'ì¹¼êµ­ìˆ˜', price: 'low', emoji: 'ğŸœ', searchQuery: 'ì¹¼êµ­ìˆ˜', comment: 'í›„ë£¨ë£© ì†Œë¦¬ê°€ ê³§ í–‰ë³µì…ë‹ˆë‹¤!' },
            { name: 'ì´ˆë°¥', price: 'medium', emoji: 'ğŸ£', searchQuery: 'ì´ˆë°¥ ë§›ì§‘', comment: 'í•œì…ì— ì™, ì™€ì‚¬ë¹„ëŠ” ì ë‹¹íˆìš”!' },
            { name: 'ìˆœëŒ€êµ­ë°¥', price: 'low', emoji: 'ğŸ²', searchQuery: 'ìˆœëŒ€êµ­ë°¥', comment: 'í•´ì¥ì˜ ì •ì„, ìƒˆìš°ì “ íŒíŒ ë„£ì–´ë³´ì„¸ìš”!' },
            { name: 'ë¼ì§€ê°ˆë¹„', price: 'medium', emoji: 'ğŸ¥“', searchQuery: 'ë¼ì§€ê°ˆë¹„', comment: 'ì–‘ë…ì´ ì†ê°€ë½ê¹Œì§€ ë°°ë„ë¡ ë¨¹ì–´ì•¼ ì œë§›!' },
            { name: 'ìƒ¤ë¸Œìƒ¤ë¸Œ', price: 'medium', emoji: 'ğŸ²', searchQuery: 'ìƒ¤ë¸Œìƒ¤ë¸Œ', comment: 'ì‚´ì§ë§Œ ë‹´ê°”ë‹¤ ë¹¼ì„¸ìš”, ì°¸ì„ì„±ì˜ ê²Œì„ì…ë‹ˆë‹¤!' },
            { name: 'ëƒ‰ë©´', price: 'low', emoji: 'ğŸœ', searchQuery: 'ëƒ‰ë©´', comment: 'ê°€ìœ„ëŠ” ìì¡´ì‹¬ì„ ì ‘ê³  ì¨ë„ ë©ë‹ˆë‹¤!' },
            { name: 'í•´ì¥êµ­', price: 'low', emoji: 'ğŸ²', searchQuery: 'í•´ì¥êµ­', comment: 'ì–´ì ¯ë°¤ì˜ í›„íšŒë¥¼ ë§ë”íˆ ì”»ì–´ë“œë¦½ë‹ˆë‹¤!' },
            { name: 'ëˆê¹ŒìŠ¤', price: 'low', emoji: 'ğŸ±', searchQuery: 'ëˆê¹ŒìŠ¤', comment: 'ë°”ì‚­í•œ ì†Œë¦¬ê°€ ë“¤ë¦´ ë•Œê¹Œì§€ ì”¹ìœ¼ì„¸ìš”!' },
            { name: 'íƒœêµ­ìŒì‹', price: 'medium', emoji: 'ğŸ›', searchQuery: 'íƒœêµ­ìŒì‹', comment: 'íŒŸíƒ€ì´ í•œ ì…ì´ë©´ ë°©ì½• ì—¬í–‰ ì™„ë£Œ!' },
            { name: 'ë² íŠ¸ë‚¨ìŒì‹', price: 'low', emoji: 'ğŸœ', searchQuery: 'ë² íŠ¸ë‚¨ìŒì‹', comment: 'ìŒ€êµ­ìˆ˜ í•œ ê·¸ë¦‡ì´ë©´ ëª¸ë„ ë§ˆìŒë„ ê°€ë²¼ì›Œì ¸ìš”!' },
            { name: 'ë¼ë©˜', price: 'low', emoji: 'ğŸœ', searchQuery: 'ë¼ë©˜', comment: 'ë°˜ìˆ™ ê³„ë€ í„°ëœ¨ë¦¬ëŠ” ìˆœê°„ì´ í•˜ì´ë¼ì´íŠ¸!' },
            { name: 'ì­ˆê¾¸ë¯¸', price: 'medium', emoji: 'ğŸ™', searchQuery: 'ì­ˆê¾¸ë¯¸ ë³¶ìŒ', comment: 'ë§¤ìš´ë§›ì— ì •ì‹ ì´ ë²ˆì©! ë°¥ í•œ ê³µê¸°ëŠ” ê¸°ë³¸!' },
            { name: 'ë³´ë¦¬ë°¥', price: 'low', emoji: 'ğŸš', searchQuery: 'ë³´ë¦¬ë°¥ ì •ì‹', comment: 'ê±´ê°•í•œ í•˜ë£¨ëŠ” ë³´ë¦¬ë°¥ë¶€í„° ì‹œì‘ì´ì£ !' },
            { name: 'íŒ¨ìŠ¤íŠ¸í‘¸ë“œ', price: 'low', emoji: 'ğŸ”', searchQuery: 'íŒ¨ìŠ¤íŠ¸í‘¸ë“œ', comment: 'ê°€ë³ê²Œ ë¨¹ê³  ë‚¨ëŠ” ì‹œê°„ì— ë‚®ì  í•œìˆ¨ ì–´ë•Œìš”?' },
            { name: 'ìŠ¤í…Œì´í¬', price: 'high', emoji: 'ğŸ¥©', searchQuery: 'ìŠ¤í…Œì´í¬ ë ˆìŠ¤í† ë‘', comment: 'ì ì‹¬ë¶€í„° ë¯¸ë””ì—„ ë ˆì–´ì˜ ì˜ˆìˆ , ì˜¤ëŠ˜ì€ ë‚˜ë¥¼ ìœ„í•œ ë‚ !' },
            { name: 'ëìŠ¤í„°', price: 'high', emoji: 'ğŸ¦', searchQuery: 'ëìŠ¤í„° ë ˆìŠ¤í† ë‘', comment: 'ê»ì§ˆ ê¹ŒëŠ” ìˆ˜ê³ ë„ ëŸ­ì…”ë¦¬ì˜ ì¼ë¶€ì…ë‹ˆë‹¤!' },
            { name: 'ì˜¤ë§ˆì¹´ì„¸', price: 'high', emoji: 'ğŸ±', searchQuery: 'ëŸ°ì¹˜ ì˜¤ë§ˆì¹´ì„¸', comment: 'ì ì‹¬ ì˜¤ë§ˆì¹´ì„¸, ì´ê²Œ ë°”ë¡œ ì§„ì •í•œ ìê¸° íˆ¬ì!' }
        ];

        const dinnerMenus = [
            { name: 'ì‚¼ê²¹ì‚´', price: 'medium', emoji: 'ğŸ¥“', searchQuery: 'ì‚¼ê²¹ì‚´', comment: 'ì˜¤ëŠ˜ ê³ ê¸° êµ½ëŠ” ì†Œë¦¬ì— ìŠ¤íŠ¸ë ˆìŠ¤ë„ ê°™ì´ êµ¬ì›Œë²„ë¦¬ì„¸ìš”!' },
            { name: 'í•œìš°', price: 'high', emoji: 'ğŸ¥©', searchQuery: 'í•œìš° ë§›ì§‘', comment: 'ì§€ê°‘ì€ ê°€ë²¼ì›Œì§€ì§€ë§Œ ë§ˆìŒì€ í’ì¡±í•´ì§‘ë‹ˆë‹¤!' },
            { name: 'ê°ˆë¹„', price: 'high', emoji: 'ğŸ–', searchQuery: 'ê°ˆë¹„ ë§›ì§‘', comment: 'ë¼ˆ ì‚¬ì´ ì‚´ê¹Œì§€ ë°œë¼ë¨¹ëŠ” ì§„ì •í•œ ë¯¸ì‹ê°€!' },
            { name: 'ì–‘ê¼¬ì¹˜', price: 'medium', emoji: 'ï¿½ä¸²', searchQuery: 'ì–‘ê¼¬ì¹˜', comment: 'ì¹­ë”°ì˜¤ í•œ ë³‘ê³¼ í•¨ê»˜ë¼ë©´ ì™„ë²½í•œ í•˜ë£¨!' },
            { name: 'ê³±ì°½', price: 'medium', emoji: 'ğŸ¢', searchQuery: 'ê³±ì°½', comment: 'ì«„ê¹ƒí•¨ ì†ì— ìˆ¨ê²¨ì§„ ê³ ì†Œí•¨, ì°¾ìœ¼ì…¨ë‚˜ìš”?' },
            { name: 'ëª©ì‚´', price: 'medium', emoji: 'ğŸ¥“', searchQuery: 'ëª©ì‚´', comment: 'ë¶€ë“œëŸ¬ì›€ì˜ ëíŒì™•, ì˜ëª» ë¨¹ë‹¤ê°„ ë¬´í•œë¦¬í•„!' },
            { name: 'í•­ì •ì‚´', price: 'medium', emoji: 'ğŸ¥“', searchQuery: 'í•­ì •ì‚´', comment: 'ë§ˆë¸”ë§ì´ ì¶¤ì¶”ëŠ” ì´ ìˆœê°„ì„ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”!' },
            { name: 'ì˜¤ë¦¬ê³ ê¸°', price: 'medium', emoji: 'ğŸ¦†', searchQuery: 'ì˜¤ë¦¬ê³ ê¸°', comment: 'ì˜¤ë¦¬ì™€ í•¨ê»˜ ë‚ ì•„ê°€ëŠ” í•˜ë£¨ì˜ í”¼ë¡œ!' },
            { name: 'ì¡±ë°œ', price: 'medium', emoji: 'ğŸ–', searchQuery: 'ì¡±ë°œ', comment: 'ìŒˆ ì‹¸ë¨¹ëŠ” ì¬ë¯¸ì— ë²Œì¨ ë°°ë¶ˆëŸ¬ìš”!' },
            { name: 'ë³´ìŒˆ', price: 'medium', emoji: 'ğŸ¥©', searchQuery: 'ë³´ìŒˆ', comment: 'ê¹€ì¹˜ì™€ í•¨ê»˜ë¼ë©´ ë°¥ë„ë‘‘ ë“±ì¥!' },
            { name: 'ì¹˜í‚¨', price: 'low', emoji: 'ğŸ—', searchQuery: 'ì¹˜í‚¨', comment: 'í›„ë¼ì´ë“œëƒ ì–‘ë…ì´ëƒ, ê·¸ê²ƒì´ ë¬¸ì œë¡œë‹¤!' },
            { name: 'ìŠ¤í…Œì´í¬', price: 'high', emoji: 'ğŸ¥©', searchQuery: 'ìŠ¤í…Œì´í¬ ë ˆìŠ¤í† ë‘', comment: 'ë¯¸ë””ì›€ ë ˆì–´ì˜ ì˜ˆìˆ , ê°íˆ ì›°ë˜ì´ë¼ í•˜ì§€ ë§ˆì„¸ìš”!' },
            { name: 'ì™€ê·œ', price: 'high', emoji: 'ğŸ¥©', searchQuery: 'ì™€ê·œ ë§›ì§‘', comment: 'ì…ì—ì„œ ë…¹ëŠ” ê±´ ëˆˆê½ƒì†¡ì´ê°€ ì•„ë‹ˆë¼ ì™€ê·œì…ë‹ˆë‹¤!' },
            { name: 'ìˆ™ì„±íšŒ', price: 'high', emoji: 'ğŸ£', searchQuery: 'ìˆ™ì„±íšŒ ë§›ì§‘', comment: 'ì‹œê°„ì´ ë§Œë“¤ì–´ë‚¸ ê¹Šì€ ë§›, ê³ ê¸‰ì˜ ì„¸ê³„ë¡œ!' },
            { name: 'ëŒ€ê²Œ', price: 'high', emoji: 'ğŸ¦€', searchQuery: 'ëŒ€ê²Œ ë§›ì§‘', comment: 'ê²Œì‚´ í•˜ë‚˜í•˜ë‚˜ê°€ ë³´ë¬¼ì°¾ê¸°, ì¸ë‚´ì‹¬ í•„ìš”!' },
            { name: 'í‚¹í¬ë©', price: 'high', emoji: 'ğŸ¦€', searchQuery: 'í‚¹í¬ë©', comment: 'ë‹¤ë¦¬ í•˜ë‚˜ê°€ ë°¥ í•œ ê³µê¸°, ì™•ì˜ ì‹ì‚¬!' },
            { name: 'ì—°ì–´', price: 'high', emoji: 'ğŸŸ', searchQuery: 'ì—°ì–´ ìš”ë¦¬', comment: 'ì˜¤ë©”ê°€3ì™€ í•¨ê»˜ ê±´ê°•ë„ ì¶©ì „!' },
            { name: 'ì˜¤ë§ˆì¹´ì„¸', price: 'high', emoji: 'ğŸ±', searchQuery: 'ì˜¤ë§ˆì¹´ì„¸', comment: 'ìš”ë¦¬ì‚¬ë¥¼ ë¯¿ê³  ë§¡ê¸°ëŠ” ìˆœê°„, ë¯¸ì‹ì˜ ì‹œì‘!' },
            { name: 'ì¥ì–´êµ¬ì´', price: 'high', emoji: 'ğŸŸ', searchQuery: 'ì¥ì–´êµ¬ì´', comment: 'ìŠ¤íƒœë¯¸ë‚˜ ì¶©ì „, ë‚´ì¼ì€ ë” í˜ì°¨ê²Œ!' },
            { name: 'í› ê¶ˆ', price: 'medium', emoji: 'ğŸ²', searchQuery: 'í› ê¶ˆ', comment: '0ë‹¨ê³„ëŠ” ìœ ì£„, ì˜¤ëŠ˜ì€ 2ë‹¨ê³„ ë„ì „?' }
        ];

        let selectedMenu = '';
        let selectedSearchQuery = '';
        let userLatitude = null;
        let userLongitude = null;
        let selectedPrice = null;

        // ì˜ˆì‚° ê´€ë ¨ ëœë¤ ë¬¸êµ¬ë“¤
        const priceLabelTexts = [
            'ğŸ’° ì˜¤ëŠ˜ ì–¼ë§ˆ ì“¸ê¹Œ?',
            'ğŸ’° ì˜ˆì‚°ì€ ì–´ë•Œ?',
            'ğŸ’° ì§€ê°‘ ì‚¬ì •ì€?',
            'ğŸ’° ì–¼ë§ˆë‚˜ ì“¸ë˜?',
            'ğŸ’° ê°€ê²©ëŒ€ëŠ”?',
            'ğŸ’° ì˜ˆì‚° ì²´í¬!',
            'ğŸ’° ëˆì€ ì–¼ë§ˆ?',
            'ğŸ’° ì˜¤ëŠ˜ ì˜ˆì‚°'
        ];

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸° ë° ëœë¤ ë¬¸êµ¬ ì„¤ì •
        window.addEventListener('DOMContentLoaded', () => {
            getLocation();
            // ëœë¤ ë¬¸êµ¬ ì„¤ì •
            const randomLabel = priceLabelTexts[Math.floor(Math.random() * priceLabelTexts.length)];
            document.getElementById('priceLabel').textContent = randomLabel;
        });

        // ìœ„ì¹˜ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        function getLocation() {
            const locationText = document.getElementById('locationText');
            
            if (!navigator.geolocation) {
                locationText.textContent = 'ìœ„ì¹˜ ì„œë¹„ìŠ¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.';
                return;
            }

            locationText.textContent = 'ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘...';
            
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    userLatitude = position.coords.latitude;
                    userLongitude = position.coords.longitude;
                    locationText.textContent = `ìœ„ì¹˜ í™•ì¸ ì™„ë£Œ! (${userLatitude.toFixed(4)}, ${userLongitude.toFixed(4)})`;
                },
                (error) => {
                    let errorMsg = 'ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
                    if (error.code === error.PERMISSION_DENIED) {
                        errorMsg = 'ìœ„ì¹˜ ê¶Œí•œì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ìœ„ì¹˜ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.';
                    }
                    locationText.textContent = errorMsg;
                    userLatitude = 37.5665; // ì„œìš¸ ê¸°ë³¸ ì¢Œí‘œ
                    userLongitude = 126.9780;
                }
            );
        }

        // ê¸ˆì•¡ëŒ€ ì„ íƒ í•¨ìˆ˜
        function selectPrice(price) {
            selectedPrice = price;
            
            // ëª¨ë“  ë²„íŠ¼ ì´ˆê¸°í™”
            document.querySelectorAll('.price-btn').forEach(btn => {
                btn.classList.remove('bg-gradient-to-r', 'from-purple-500', 'to-pink-500', 'text-white', 'border-purple-500');
                btn.classList.add('border-gray-200');
            });
            
            // ì„ íƒëœ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì ìš©
            const selectedBtn = document.getElementById('price' + price.charAt(0).toUpperCase() + price.slice(1));
            selectedBtn.classList.remove('border-gray-200');
            selectedBtn.classList.add('bg-gradient-to-r', 'from-purple-500', 'to-pink-500', 'text-white', 'border-purple-500');
        }

        // ë©”ë‰´ ì„ íƒ í•¨ìˆ˜
        function selectMenu(type) {
            if (userLatitude === null || userLongitude === null) {
                alert('ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”! ğŸ˜Š');
                return;
            }

            if (!selectedPrice) {
                alert('ê¸ˆì•¡ëŒ€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”! ğŸ’°');
                return;
            }

            // ë‹¤í¬ ëª¨ë“œ í† ê¸€
            const body = document.body;
            if (type === 'dinner') {
                body.classList.add('dark-mode');
            } else {
                body.classList.remove('dark-mode');
            }

            const menus = type === 'lunch' ? lunchMenus : dinnerMenus;
            // ì„ íƒëœ ê¸ˆì•¡ëŒ€ì— ë§ëŠ” ë©”ë‰´ë§Œ í•„í„°ë§
            const filteredMenus = menus.filter(menu => menu.price === selectedPrice);
            
            if (filteredMenus.length === 0) {
                alert('í•´ë‹¹ ê¸ˆì•¡ëŒ€ì— ì¶”ì²œí•  ë©”ë‰´ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ê¸ˆì•¡ëŒ€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            // ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
            showAnimation(filteredMenus);
        }

        // ì• ë‹ˆë©”ì´ì…˜ í‘œì‹œ
        function showAnimation(menus) {
            const animationDisplay = document.getElementById('animationDisplay');
            const animationText = document.getElementById('animationText');
            const resultSection = document.getElementById('resultSection');
            
            resultSection.classList.add('hidden');
            animationDisplay.classList.remove('hidden');

            let counter = 0;
            const interval = setInterval(() => {
                const randomMenu = menus[Math.floor(Math.random() * menus.length)];
                animationText.textContent = randomMenu.name;
                counter++;

                if (counter >= 10) { // 1ì´ˆ ë™ì•ˆ (100ms * 10)
                    clearInterval(interval);
                    showResult(menus);
                }
            }, 100);
        }

        // ê²°ê³¼ í‘œì‹œ
        function showResult(menus) {
            const selectedMenuItem = menus[Math.floor(Math.random() * menus.length)];
            selectedMenu = selectedMenuItem.name;
            selectedSearchQuery = selectedMenuItem.searchQuery;
            
            const animationDisplay = document.getElementById('animationDisplay');
            const resultSection = document.getElementById('resultSection');
            const resultText = document.getElementById('resultText');
            const menuEmoji = document.getElementById('menuEmoji');
            const menuComment = document.getElementById('menuComment');

            animationDisplay.classList.add('hidden');
            resultText.textContent = selectedMenu;
            menuEmoji.textContent = selectedMenuItem.emoji;
            menuComment.textContent = selectedMenuItem.comment;
            
            resultSection.classList.remove('hidden');
            resultSection.classList.add('result-appear');

            // Confetti íš¨ê³¼
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#667eea', '#764ba2', '#f093fb', '#4facfe']
            });

            // ì¶”ê°€ confetti
            setTimeout(() => {
                confetti({
                    particleCount: 50,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: ['#fa709a', '#fee140', '#30cfd0']
                });
            }, 250);

            setTimeout(() => {
                confetti({
                    particleCount: 50,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: ['#a8edea', '#fed6e3', '#fddb92']
                });
            }, 400);
        }

        // ì§€ë„ ì—´ê¸°
        function openMap() {
            // ë„¤ì´ë²„ ì§€ë„ - ì¢Œí‘œì™€ ê²€ìƒ‰ì–´ ê¸°ë°˜
            const url = `https://map.naver.com/v5/search/${encodeURIComponent(selectedSearchQuery)}?c=${userLongitude},${userLatitude},15,0,0,0,dh`;
            window.open(url, '_blank');
        }

        // ë¦¬ì…‹
        function reset() {
            const resultSection = document.getElementById('resultSection');
            resultSection.classList.add('hidden');
            selectedMenu = '';
            selectedSearchQuery = '';
            // ë‹¤í¬ ëª¨ë“œ í•´ì œ
            document.body.classList.remove('dark-mode');
        }
    </script>
</body>
</html>